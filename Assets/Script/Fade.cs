using System;
using UnityEngine;

public class Fade : MonoBehaviour
{
    public CanvasGroup canvas;
    public float fadeSpeed; // Kecepatan fade
    public int[] indexValueFadeOut;
    public int[] indexValueFadeIn;
    private int indexFadeIn;
    private int indexFadeOut;
    public Dialogue dialogue;
    private bool isFading = false;

    void Start()
    {
        indexFadeIn = 0;
        indexFadeOut = 0;
    }

    void Update()
    {
        if (indexFadeOut < indexValueFadeOut.Length && indexValueFadeOut[indexFadeOut] == dialogue.index && !isFading)
        {
            indexFadeOut++;
            StartCoroutine(FadeOut());
        }

        if (indexFadeIn < indexValueFadeIn.Length && indexValueFadeIn[indexFadeIn] == dialogue.index && !isFading)
        {
            indexFadeIn++;
            StartCoroutine(FadeIn());
        }
    }

    private System.Collections.IEnumerator FadeIn()
    {
        isFading = true;
        while (canvas.alpha < 1)
        {
            canvas.alpha += fadeSpeed * Time.deltaTime;
            yield return null; // Tunggu hingga frame berikutnya
        }
        canvas.alpha = 1; // Pastikan nilai akhir tepat di 1
        isFading = false;
    }

    private System.Collections.IEnumerator FadeOut()
    {
        isFading = true;
        while (canvas.alpha > 0)
        {
            canvas.alpha -= fadeSpeed * Time.deltaTime;
            yield return null; // Tunggu hingga frame berikutnya
        }
        canvas.alpha = 0; // Pastikan nilai akhir tepat di 0
        isFading = false;
    }
}


/*S%??#@@#?*++++?*,................................................................,...........................................................;*.,+#?..
S%%##@@@%+++++**.........................................................,,.,;**???+,........................................................;*.,;S?..
S%S@S@@#?*+;++**.........................................,,,,,,..,,,..,;?S#%%SS#SS##%+:::::,.................................................;+.,;S?..
#S@@S#@@?*++++**.......................................,*%%SS%%%?%%???%S#@@@S#@@@@#S####S#S#%+...............................................;;.,+#?..
##@@S@@@%*++++**................................,;;::::?#S#@@@@@#%%%S#@#S@@#@@#S#@#@@@@@@@@@@@?;:,,..........................................+;.,+@?..
##@@S@@@?+;+++**..............................,+S%S######@@@###@@@S%%%#@@#SS#SS@##@@@@@#######SS#S??+;,,.....................................+;.,+#*..
@S@#S#@@?+;+++**..............................;%;+SSS######@#S##@@@@#%%#@#%%%S@##@##@#@@@@@@#@##@@S##SS%*;...................................+;.,+#*..
@S@#S#@@?+;;*+**............................,:?*?S##@@@@@@####@@@@@@@#%S##%%S@@#@@@@@@@@@@@@@@@@@@@@@S#@#%,..................................+:.:*@*..
@S@@S#@@%+;;++**........................:;*?%###@#@@@@###S#@@@@@@@@@@#%%%%%%S#S#SS##@##@@@@@@@@@##@@@@@@@%,..................................+:.:*@*..
@S@@SS@@%+;;++**,......................*SS@#@@@@@@@@#SS#@@@@@@@@@###%%%%%%%%%%%%%#@@@@@@@@@@@@@@@@@####@@@S?;.,..............................*:.:*#*..
@#@@SS@@%*;;****......................;%#@@@@@@@@@#SS#@@@@@@@@#@@@@@#%%%%%%SSSSS##@@@@@@@@@@@@@@@@@@@#S#@##@#+..............................,*:.:*%+..
@S@@#S@@?+;;+***....................:*%S@##@@#@@@#%S#@@@@@@##@@@#SSS%%%%%%%%SS#@@@@@@@@@@@@@@@@@@@S#@@@SS##SSS+:,...........................,*:.:*%+..
#S@@#S@@?+;;++**...................;S##@#S@##@@@S%#@@@@@@SS#@@#S%%%%%%%%S%%%%%%S#@@@#S@@@@@@@@@@@@@######SS#@@@S?;,.........................,*:.:*%+..
#S@@SS@#?+;;++**..................;#@####@@@@@@%%#@@@@@@S#@@@#%%%%S#SSS%#%%S%%%%%#@@@#S#@@@@@@@@@@SS#@@#SSS%S#@@@S?,........................,*:.:+?+..
#S@@SS@#?+;;****................:*%+?SS@@@@@@@S%@#S#@@@S#@@@@S%S#S#@@S%%#%%#S%%%%SS@@@@S#@@@@@@@#@##SSS@@#S%%%#@@@#;........................,*,.:+?+..
#S@@SS#S?+;+****...............,%%:+#@@@@##@@S%#@S@@@@##@####%S@#S@@SS%%#S%S@S%%%S%S#S@@SS@@@#@@@##@@#%%S#@@S%%S@@@+........................,*,.:+?+..
#%##SS#S?+;+****...............:#+;@@@#S#@@@#%S#%#@@@##@#S@#SS@@#S@S*SS%S#%S@#%%S##%S##@@%S@@#S@@@@@@@#S%%%#@@S%S@@*........................,?,.:+*;..
SS##SS#S?+;+****,..............,*S#@#S#@@@@@S%S%S##@#S@@S@@S%#@@#S@?;%#S%%%%#@#%%S#S%SSS@@%%#@#S@#SSS@@##SS%%S##S%S*,.......................,*,.:**;..
#S##SS#%?+;+**+*.,..............;S#S#@@@@@@S%%%%SS@@S@@%SS#S##*#@#@*:?S#S?*S%#@S?S@@%%SSS@#%%#@S%#SS####SSS##SSS##%S?:......................,*,.:**;..
#S###S#S?+;+**+*..............:?SS#@###@@@#%%%%%%S@SS@S%*?#S#%:S@@@+,;S#S%;?S%S@%%S@@S%S%#@S?%##%%S%%SSS%S%%S@@@##SS%?+,....................,?,.;?*;..
S%S##S##?+;+?*+*.............;%S%S##@@@@@@%?%%%%%##%#@S?;%###;,%@@@;,,*S#S*;%S?%#%?S@#%SS%@@%?S@S?%%?SS%%##%?%@@@#S?%S%,....................,?,.;%?;..
S%S##SS#?*?%SS??;;:::::,,,,,+SS?:%@@@@@@@#%?%?%?S#%%#S%:;###S,,*@@#;.,:%S#%;+S%;%#??#@@SSSS@#??S@%?%??%S%%@@%?%@@@#S;%%,....................:?,.;S?;..
S?S##%S#**S%;;+?::::::::::,+SS?,+#@##@@@@%%?%%%?S%?%#S+,+###?..;#@@;..,+S##?,*#?;%S?%#@@S##S@S?%#S?????%?%%@@S?%@@@@?%S:....................:*,.;#?+..
S%S##SS#?*?;,,;*...........;SS+?@#S#@@@@#??%%S%?%??%S?:.*##S?+*?#@@+..,,*S##*,*#%?%%S#@@@####@%?%#%?%????%?#@@@S%@@@@@?,....................,;++?#?:..
SSS#@S#@?+*;,,;*,..........,?S#SS#@@@#@@%?%S##%S%??SS;:;S@@#?**;+#@%,...,*%##+,?#;,*S%%#@SS@@@#??%%?S%?%SS%%@@@@##@@@#%:....................:?:,+#%:..
%%S##%S@?***++**,...........:SS%@@@@S#@#??###S@S%??##%??#S@S:...,*@#:....,+S@@+,*#;,+%??##?S@@#%?%%?S#?%S##?%@@@@##@@@@?....................:*,.;#?;..
%%%#@%S@?++?S?**...........:?%%@@@@%#@@%?S@@@@@#%?%S*:,,%%@#,.....?@?......;%##+.*S;.:?%?#S*S@@S?S%?%@S?S##S?S@@@@#@@@#+..................,:+?***#*:..
%%S#@%%#?+?*?++*..........:??%@@@@%S@#%?%@@@@@##%?%+...,%%@#:.....,*#+......,*#@*,;%+.,*%?S%+%@@%S#?S@@?S#@@%?#@@@#S@@?...................;+;*:??#*+..
%%??#SSS*+?**;+*.........:%%%S*S@?%#%S?%@@@@@@@#??%;....;%#@;.......+S;.......:%@%:,??:.;??%S+;*%%@SS@@S%@@@#?%@@@@%#@?..,::::::::::,,,,::*:,+,+?S+*::
%%??@##@?*%**;**.........*S?%#;?%?%%S??#@@@@@@@%*??,...,:+#@%;;:,,,,.:?+,.......:%S+;SS?***?%#S?%%S@#@@@?S@@@S*%@@@S?#%,.,,,::::::::,,,,::*;,+,+%S+*;:
%%S@@%%@?*?**;**.........,*%?%%S??%%?*%@@@@@@@S?*%+,:;::*++S@S?%?;:,,.,+*;,,,....,;?%?++*+;?*?#@S%%@@@@@@%@@@@%*%@@@?%%,..................;*;+++*#%;..
%%@@@%%#%*;**;**...........;%S##?%S?*%@@@@@@@#?*?S?*;;?+?S??S?;::,,,,...,:;;,.....,,,;?%#@@###SSSS%#@@@@@#S@@@@?*%@@#%;...................,:;S%;*?S*;+
%S@@#%%SS#%S*;**............,:?S??**S@@@@@@@S***%*;%S#@@@@@@@@#%+;,................,;%@@@@@@@@##S##%@@@@@@##@@@#??%@S:......................,?:;*+SS%%
%%@#S?%SS@S#%;**..............+S?*%#@@@@@@@S****S#@@@@@#@@@#*S@@%+:................,:*#######?#@@##SS@#@@@@@@@@@#%??*,......................:?,.;+%+::
%S@#S%%%S@%#S;**............,+%SS#@@@@@@@#?%%?*%@@#*%@@@@@@#;,%@@+..................,%#####@#**@@S;*%###@@@@@@@@@S%;+*;,....................:?,.;*%;,:
%S@#S?%%%@%@S;**..........,+SS?;+#@@@###%%SS?**#@%:,S@@@@@@@@%#@#%,.................,%@@@@@#S##@%S,.+%#%S@@@@@@@@@@?;,:++:,.................:?,.;*%;,:
%S@#S?%%?%?SS;**.,,,,,,:;*??;,,:%#SS%%S##S****%+:,..;S%%SS##??%+?*...................+?*S#%S%%S%?*,,,?%S%S@#@@#SSS@#%+,.,:;;::..............:*,.;*%:,:
%S@#S%%%**:+?;++.,:::::::,.,;*%S%?S##@@S???S*%S;;*+,.,*%?*:,,;***,...................,+***?+:;+*+,;*;%#%%?S#SS%*+*%#@#?:...,,,..............:*,.;*%:,:
%S@#S%%%*?:*%*?+.........,+??%S##@@###%*S%****S?+*S%;,,;+*****+:.......................,;**++*;++??++?@@#?%#@S?+;;**%SS?:...................:+,.+*%:,:
%#@#S%%%**:??%%+........:*%%S@@##S?%@S:.?%%%++S#+;++++;;;+;;;;:.........................,:;::;;;+:,::+S@@SSS@@#?*++??+?%?:..................:*,.+*?:,:
%#@#S%%%*+;?***+.......,?S##?+::??#%*#*,%%%@*+%@?,,,:,,,,:..............,;;:,.................,,,.,,:??#@S@S%#@@@@S??****+,.................:+,.+?%:,:
%#@#S%%S*+;****+.......,S%+,...:%#S,.;S%%?%@?;?@@+,,.....................+?;,..................:+;::??*%@@@?%@@@@@%+?::***:.................:+,.+?%:,:
%@@#SSS%*+;****+.......,+;,..,,:#@;,:;+%S?#@%+*:;?+,,:**:.................,..................,.,,::*?;?*#@@S@@##@@;.::.,+?:.................:+..+?%:,:
%@@@#%S%*+;?*+*+..............,:%S;::,.,*S#@S?S+:+S+::;;,................:?:....................,,+###@*?@@@#S%@#*,.....,+,.................:;..+??;;;
%@@@#SS%*+;****;................:*,.....:S@@%%@@@@@#+,,..................,;:...................,,+#@@@@%+#####S*,...........................;+..+*?;;?
%@@@#SS%*+;****;................,+:.....,%@@#@@@@@@@@?:,,.....................................,,+#@@@@@#*S%S@#%,............................;+..+*?;:*
%@@@@SS%*+;*+**;.................,;,.....*@@@@@@@@@#@@S+,,....................................:?@@@@@@#@S%?S@#+.............................:;.,+*?;;;
%@@@@SS%?+;*+**;.........................:#@S@?%@@@%%@@@?;,.............,+++*:..............:*S@@@@@SS@@@#SS%+,.............................:;.,**?;:;
%@@@@SS%?;;*+**;.........................:%?S@#?#@S%*?#@@@S*:...........,:,,:,...........,;?#@@@@@@@#@@SS##*................................;;.,**?;:;
?@##@SS%?;;*+++:.......................,+%:.+@#S#@@@@%*%@@#@@%+:,.....................,:+S@@@@@@@@#?*%%*,,+S;...............................;;.,**?;;;
%@@@@#S??;;*+++:......................:*%;..,%+,;*S@@%*#@@##@@@??*;,,..............,;*S@@@@@@@@@@?:,*+*,..,?%;........................,:,...;;.,?*?;:;
*?%%%??**++*++*;,,,,................,*%#%,...*+...,:?#S@@@@#S@@*:;+*?*+;:,,.,,:;+*%#@@@@@@@#SSSS+..*+;+....*%?:.......................::,...;;.,?*?;:;
......,,,,,,,,:::;::::::,,,,.......:**#@*....+*.....,:*S###%S#@%,,,,::++*?**?S@@@@@@@@@@@@S:.,*+...:*+;...,%#*?,............................;;.,?*?;:;
....................,,,,:;;;;;;:,,.**;S@+....++.........,?:,:,;%:.,,:,,,,::::;+*?%%%%????S?...;;....;?+...:##**,............................;+.:?*?;:;
............................,,,:;?+;+?%@?...,+:.........,*+...,%;..,:,:,:,:,:,,,,,::::;;;??,..+:.....:*:.,%@S+,......................,:,....++.:%*?;:;
,,,..........................,,.,:,:;;;?S+::?+...........,+*:.,%;...,,:,:,:,:,:,:,:,,,,,,**..,*,......,;*%%;,........................;?;....;+:;??*;::
;;;:::::::,:,,,,,.,...,,,..,*+:......,:;+?S#*..............:*:.?+.....,,:::,:,:,:,:,:::,,*?,.;+....,..:*%?%:..........................:,....:+;+%%?;:;
;:::::::::,,,,,,:::,,:;+++;::;;:,......,*S?%?*,.............:*,?+.......,,:::,:,:,:::::,,*?,,*,.....:**??:S#;...............................:;.:?**;;;
:,:,:,:,:,,,,,,,:::::::::;??+;:::;:,..:*S*,*?%?:............,*:?+.........,,:,:,:,:,:::::+%,,*:....;?;;#S,%@S:..............................;;.;?**;:+
,,,,,,,,,,,,,,,,,,,,,,,,,,,;++++;::;::*?@+.;S#%%+;,.........:?:%+...........,,,,:,:,:,:,,+%,.:+;:..;?:+@#;%@#;..............................;+:+%?*+*%
,,,,,,,,,,,,,,,,,,,,,,,,,,,.,;;;+*;,,;?%@*.+#@?*,:++:,....;+*:,S;...............,,:::::,:+S:........;*+S@###?;..............................;+;?%%*;*%
,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,;;;++;,;S@S;S@#?;...,;+;:,.,,..,%;.................,,:::,::%+:;::::::,:%%#@@%+:::::,:,,,::,..................;+,+%?+,,.
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.:;;:;+;:*#@@@S;......,***;+?***%:...................,,,:;:+S%##S%%S#?+*+;+?%%*+;;;;;;;;+?S;.................;;.+?*+,..
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,;*;;+*?%*;:;:,....:%SS%%SS?%@%++;;:;+++;;**?%?++**++*?*?*?**%??;;*?......,,,,.........,S+.................;:.+?*+;+*
,.,.,.,,,.,,,.,,.,,......,...,..,,,,:+;,:;:,..,,::,.,+*,,,;+:,::;:+*+::,,++,;;:*%;::::::+;:....:*.:S;...................,S+.................;:.+**+,,,
..,..........,..........,............,:;:,::,...,,::,,+:,:;*+,,:*:;;,.:;.;+:%?;;?,.,:%?*:.:;;.,++:S@+::::::::::::,,:,:::;S+,:::::::,,,,,,,,,;:.+?*+,,,
........................................::,,.......,:;;*;:;**+:*%,;;+;:*.;*,+*:+*,,*?%%;;+?;**%%+:++*%S%*++++++++++++**??#+;+++++++++++++++;;,.+**++++
......................,:;;:.....,;+***;+??%?;,,::;;;+?+++*S%?+::;,:,:+;;,,;++;:%+:+%%**++;,,:+?%?:.,;++*?*+;:,,,,,::,,,:;%;................,;,.***+,,,
.....................:?%?%%*:;;*S@#?;;;?%;:;%S*+++;+;::,;%::*;.,,.,;::;+;:+:,,,?*:+;:;+::,,,,+;%S;,.,*;:::;+*?%S?+;;;;;;*%:,:,,,,,,,,:::::::+,.*?*+:::
....................;%*;;::*S%+;:;;?*...+?,.:%;...;;..,:?*.,+,....,++;;;;:+:...*+.,,,,+:::,,,;*;?%;..,+:::,...,:;****++++S;,::+*???+:;;;;;;+*,.??**+;;
...................+%;;+:;;,:?*,..,+#+...*?,.*?,,+?,..,%*,.;*..:,.:+,:::;*;,...*+,;;:;*+,...,:*;.+*,..:*,..........,:;;;;+**+?%+;;;*?:......;:,?%%;...*/

